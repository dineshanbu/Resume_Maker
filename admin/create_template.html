<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layout Architect - Admin Template Creator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Bricolage+Grotesque:wght@800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #17cede;
            --primary-hover: #4338CA;
            --primary-light: #EEF2FF;
            --bg-canvas: #F8FAFC;
            --card-border: #E2E8F0;
            --dark-panel: #0F172A;
            --text-dark: #1e293b;
            --text-muted: #64748b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-canvas);
            color: var(--text-dark);
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Bricolage Grotesque', sans-serif;
            font-weight: 800;
        }

        .top-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: white;
            border-bottom: 1px solid var(--card-border);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .close-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: var(--bg-canvas);
            transform: translateY(-1px);
        }

        .header-title {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .header-title h1 {
            font-size: 20px;
            margin: 0;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: linear-gradient(135deg, var(--primary), #4f46e5);
            color: white;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .header-right {
            display: flex;
            gap: 12px;
        }

        .btn-secondary-custom {
            padding: 10px 20px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            background: white;
            color: var(--text-dark);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .btn-secondary-custom:hover {
            background: var(--bg-canvas);
            border-color: var(--primary);
            transform: translateY(-1px);
        }

        .btn-secondary-custom:active {
            transform: translateY(0);
        }

        .btn-secondary-custom.loading {
            pointer-events: none;
            opacity: 0.7;
        }

        .btn-primary-custom {
            padding: 10px 24px;
            border-radius: 8px;
            border: none;
            background: var(--primary);
            color: white;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-custom:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(23, 206, 222, 0.3);
        }

        .btn-primary-custom:active {
            transform: translateY(0);
        }

        .btn-primary-custom.loading {
            pointer-events: none;
            opacity: 0.7;
        }

        .spinner {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.6s linear infinite;
            margin-right: 8px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .main-container {
            display: grid;
            grid-template-columns: 320px 1fr 320px;
            gap: 24px;
            padding: 24px;
            height: calc(100vh - 73px);
        }

        .left-panel, .right-panel {
            background: white;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            padding: 24px;
            overflow-y: auto;
        }

        .left-panel::-webkit-scrollbar, .right-panel::-webkit-scrollbar, .center-panel::-webkit-scrollbar {
            width: 8px;
        }

        .left-panel::-webkit-scrollbar-track, .right-panel::-webkit-scrollbar-track, .center-panel::-webkit-scrollbar-track {
            background: transparent;
        }

        .left-panel::-webkit-scrollbar-thumb, .right-panel::-webkit-scrollbar-thumb, .center-panel::-webkit-scrollbar-thumb {
            background: var(--card-border);
            border-radius: 4px;
        }

        .left-panel::-webkit-scrollbar-thumb:hover, .right-panel::-webkit-scrollbar-thumb:hover, .center-panel::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        .panel-title {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--text-dark);
        }

        .layout-cards {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 28px;
        }

        .layout-card {
            padding: 16px;
            border-radius: 10px;
            border: 2px solid var(--card-border);
            background: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .layout-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(23, 206, 222, 0.15);
        }

        .layout-card.active {
            border-color: var(--primary);
            background: var(--primary-light);
            box-shadow: 0 4px 12px rgba(23, 206, 222, 0.2);
        }

        .layout-card h4 {
            font-size: 14px;
            margin-bottom: 4px;
            font-weight: 700;
        }

        .layout-card p {
            font-size: 12px;
            color: var(--text-muted);
            margin: 0;
        }

        .control-section {
            margin-bottom: 24px;
        }

        .control-section h5 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 14px;
            color: var(--text-dark);
        }

        .toggle-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--card-border);
        }

        .toggle-row:last-child {
            border-bottom: none;
        }

        .toggle-label {
            font-size: 13px;
            color: var(--text-dark);
            font-weight: 500;
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            background: var(--card-border);
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: var(--primary);
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(20px);
        }

        .center-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 40px;
        }

        .resume-preview-container {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            overflow: visible;
            transition: all 0.4s ease;
            margin-bottom: 40px;
        }

        .resume-preview {
            padding: 48px;
            min-height: auto;
            background: white;
            transition: all 0.4s ease;
            position: relative;
        }

        .resume-preview.transitioning {
            opacity: 0.5;
            transform: scale(0.98);
        }

        .resume-preview.inverted {
            background: var(--dark-panel);
            color: white;
        }

        .resume-header {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 2px solid var(--card-border);
        }

        .resume-preview.inverted .resume-header {
            border-bottom-color: rgba(255,255,255,0.2);
        }

        .resume-name {
            font-size: 36px;
            margin-bottom: 6px;
            letter-spacing: -0.5px;
        }

        .resume-title {
            font-size: 18px;
            color: var(--primary);
            margin-bottom: 12px;
            font-weight: 600;
        }

        .resume-contact {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .resume-preview.inverted .resume-contact {
            color: rgba(255,255,255,0.7);
        }

        .resume-section {
            margin-bottom: 28px;
        }

        .section-title {
            font-size: 16px;
            margin-bottom: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--primary);
        }

        .experience-item {
            margin-bottom: 20px;
        }

        .experience-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }

        .experience-role {
            font-size: 15px;
            font-weight: 700;
        }

        .experience-company {
            font-size: 14px;
            color: var(--text-muted);
            font-weight: 600;
        }

        .resume-preview.inverted .experience-company {
            color: rgba(255,255,255,0.7);
        }

        .experience-date {
            font-size: 12px;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .resume-preview.inverted .experience-date {
            color: rgba(255,255,255,0.6);
        }

        .experience-description {
            margin-top: 8px;
        }

        .experience-description li {
            font-size: 13px;
            line-height: 1.6;
            margin-bottom: 6px;
            color: var(--text-dark);
        }

        .resume-preview.inverted .experience-description li {
            color: rgba(255,255,255,0.85);
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .skill-tag {
            padding: 8px 12px;
            background: var(--primary-light);
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
            color: var(--primary-hover);
        }

        .resume-preview.inverted .skill-tag {
            background: rgba(255,255,255,0.1);
            color: var(--primary);
        }

        .resume-layout-sidebar {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 0;
            min-height: 1100px;
        }

        .resume-layout-sidebar.sidebar-right {
            grid-template-columns: 1fr 250px;
        }

        .sidebar-content {
            background: var(--dark-panel);
            padding: 40px 24px;
            color: white;
        }

        .sidebar-content .section-title {
            color: var(--primary);
            font-size: 14px;
            margin-bottom: 16px;
        }

        .sidebar-content .resume-section {
            margin-bottom: 32px;
        }

        .main-content-wrapper {
            padding: 48px 40px;
        }

        .compact-spacing .resume-section {
            margin-bottom: 20px;
        }

        .compact-spacing .experience-item {
            margin-bottom: 14px;
        }

        .layout-executive .resume-header {
            background: linear-gradient(135deg, var(--primary), #4f46e5);
            color: white;
            padding: 40px;
            margin: -48px -48px 32px -48px;
            border-radius: 0;
            border-bottom: none;
        }

        .layout-executive .resume-name {
            color: white;
            font-size: 42px;
        }

        .layout-executive .resume-title {
            color: rgba(255,255,255,0.9);
        }

        .layout-executive .resume-contact {
            color: rgba(255,255,255,0.8);
        }

        .layout-creative .resume-content-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .layout-creative .resume-header {
            grid-column: 1 / -1;
            text-align: center;
        }

        .layout-impact .section-title {
            font-size: 20px;
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            margin: 0 -48px 20px -48px;
        }

        .layout-impact .resume-name {
            font-size: 48px;
            background: linear-gradient(135deg, var(--primary), #4f46e5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .layout-portfolio .resume-section {
            background: var(--bg-canvas);
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .layout-timeline .experience-item {
            position: relative;
            padding-left: 40px;
            border-left: 3px solid var(--primary);
            margin-left: 20px;
        }

        .layout-timeline .experience-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 0;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: var(--primary);
            border: 3px solid white;
            box-shadow: 0 0 0 2px var(--primary);
        }

        .layout-skill-focused .skills-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 14px;
            margin-bottom: 32px;
        }

        .layout-skill-focused .skill-tag {
            padding: 14px 18px;
            font-size: 14px;
        }

        .layout-compact .resume-preview {
            padding: 32px;
        }

        .layout-compact .resume-section {
            margin-bottom: 18px;
        }

        .layout-compact .experience-item {
            margin-bottom: 12px;
        }

        .layout-compact .resume-name {
            font-size: 28px;
        }

        .layout-horizontal .resume-header {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 24px;
            align-items: center;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 24px;
        }

        .layout-horizontal .resume-contact {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-end;
            font-size: 12px;
        }

        .layout-horizontal .resume-section {
            border-left: 4px solid var(--primary);
            padding-left: 24px;
            margin-bottom: 32px;
        }

        .layout-two-tone .resume-preview {
            background: linear-gradient(to right, #f8fafc 30%, white 30%);
        }

        .layout-two-tone .resume-header {
            background: var(--primary);
            color: white;
            padding: 40px;
            margin: -48px -48px 32px -48px;
        }

        .layout-two-tone .resume-name,
        .layout-two-tone .resume-title,
        .layout-two-tone .resume-contact {
            color: white;
        }

        .layout-modern-pro .section-title {
            background: linear-gradient(135deg, var(--primary), var(--secondary-color, #4f46e5));
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            display: inline-block;
            margin-bottom: 16px;
        }

        .layout-modern-pro .experience-item {
            background: var(--bg-canvas);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 16px;
            border-left: 4px solid var(--primary);
        }

        .layout-accent-left .resume-section {
            position: relative;
            padding-left: 32px;
        }

        .layout-accent-left .resume-section::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 6px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--secondary-color, #4f46e5));
            border-radius: 3px;
        }

        :root {
            --secondary-color: #4f46e5;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .color-input-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .color-input-custom {
            width: 60px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid var(--card-border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-input-custom:hover {
            transform: scale(1.05);
        }

        .color-text-input {
            flex: 1;
            padding: 10px 14px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            font-size: 13px;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
        }

        .color-text-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(23, 206, 222, 0.1);
        }

        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .preset-btn {
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid var(--card-border);
            background: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .preset-btn:hover {
            background: var(--bg-canvas);
            border-color: var(--primary);
        }

        .preset-btn.active {
            background: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
        }

        .feature-section {
            margin-bottom: 24px;
            padding: 16px;
            background: var(--bg-canvas);
            border-radius: 10px;
        }

        .feature-section h5 {
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-dark);
        }

        .export-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .export-btn {
            padding: 10px 16px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            background: white;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .export-btn:hover {
            background: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
        }

        .icon-svg {
            width: 16px;
            height: 16px;
        }

        .form-label {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 6px;
            display: block;
            color: var(--text-dark);
        }

        .form-control-custom {
            width: 100%;
            padding: 10px 14px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            font-size: 14px;
            transition: all 0.2s;
            font-family: 'Inter', sans-serif;
        }

        .form-control-custom:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(23, 206, 222, 0.1);
        }

        .select-custom {
            width: 100%;
            padding: 10px 14px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            font-size: 14px;
            background: white;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
        }

        .select-custom:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(23, 206, 222, 0.1);
        }

        .slider-group {
            margin-bottom: 20px;
        }

        .slider-label {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            color: var(--text-dark);
        }

        .slider-input {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--card-border);
            outline: none;
            -webkit-appearance: none;
        }

        .slider-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .slider-input::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-input::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .slider-input::-moz-range-thumb:hover {
            transform: scale(1.2);
        }

        .color-picker-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .color-option {
            width: 100%;
            height: 40px;
            border-radius: 8px;
            border: 2px solid var(--card-border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-option:hover {
            transform: scale(1.05);
            border-color: var(--primary);
        }

        .color-option.active {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(23, 206, 222, 0.2);
        }

        .notification {
            position: fixed;
            top: 90px;
            right: 24px;
            background: white;
            padding: 16px 24px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            border-left: 4px solid var(--primary);
            z-index: 2000;
            animation: slideIn 0.3s ease-out;
            display: flex;
            align-items: center;
            gap: 12px;
            max-width: 400px;
        }

        .notification.success {
            border-left-color: #10b981;
        }

        .notification.error {
            border-left-color: #ef4444;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .notification.hiding {
            animation: slideOut 0.3s ease-out;
        }

        .notification-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .notification-message {
            font-size: 13px;
            color: var(--text-muted);
        }

        @media (max-width: 1400px) {
            .main-container {
                grid-template-columns: 280px 1fr 280px;
            }
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
            }

            .left-panel, .right-panel {
                height: auto;
                max-height: none;
            }
        }
    </style>
</head>
<body>
    <div class="top-header">
        <div class="header-left">
            <button class="close-btn" id="closeBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M15 18l-6-6 6-6"/>
                </svg>
            </button>
            <div class="header-title">
                <h1>Layout Architect</h1>
                <span class="status-badge">
                    <span class="status-dot"></span>
                    LIVE DESIGN MODE
                </span>
            </div>
        </div>
        <div class="header-right">
            <button class="btn-secondary-custom" id="newTemplateBtn">New Professional Template</button>
            <button class="btn-primary-custom" id="publishBtn">Publish Changes</button>
        </div>
    </div>

    <div class="main-container">
        <div class="left-panel">
            <h3 class="panel-title">Core Architecture</h3>
            
            <div class="layout-cards">
                <div class="layout-card active" data-layout="modern">
                    <h4>Modern Minimalist</h4>
                    <p>Clean, single-column design with emphasis on typography</p>
                </div>
                <div class="layout-card" data-layout="executive">
                    <h4>Executive Elite</h4>
                    <p>Professional format with gradient header emphasis</p>
                </div>
                <div class="layout-card" data-layout="sidebar">
                    <h4>Refined Sidebar</h4>
                    <p>Two-column layout with dedicated sidebar section</p>
                </div>
                <div class="layout-card" data-layout="creative">
                    <h4>Creative Bento</h4>
                    <p>Grid-based design with visual hierarchy</p>
                </div>
                <div class="layout-card" data-layout="impact">
                    <h4>High Impact</h4>
                    <p>Bold headers with maximum visual presence</p>
                </div>
                <div class="layout-card" data-layout="portfolio">
                    <h4>Portfolio Grid</h4>
                    <p>Showcase-focused with card-based sections</p>
                </div>
                <div class="layout-card" data-layout="timeline">
                    <h4>Timeline Experience</h4>
                    <p>Chronological layout with visual timeline</p>
                </div>
                <div class="layout-card" data-layout="skill-focused">
                    <h4>Skill-Focused</h4>
                    <p>Prominent skills display with emphasis</p>
                </div>
                <div class="layout-card" data-layout="horizontal">
                    <h4>Horizontal Lines</h4>
                    <p>Bold horizontal dividers with side alignment</p>
                </div>
                <div class="layout-card" data-layout="modern-pro">
                    <h4>Modern Professional</h4>
                    <p>Gradient accents with card-based sections</p>
                </div>
                <div class="layout-card" data-layout="two-tone">
                    <h4>Two-Tone Elite</h4>
                    <p>Split background with color blocking</p>
                </div>
                <div class="layout-card" data-layout="accent-left">
                    <h4>Accent Border</h4>
                    <p>Gradient left borders for visual flow</p>
                </div>
                <div class="layout-card" data-layout="compact">
                    <h4>Compact ATS</h4>
                    <p>Space-efficient design optimized for ATS systems</p>
                </div>
            </div>

            <div class="control-section">
                <h5>Layout Controls</h5>
                <div class="toggle-row">
                    <span class="toggle-label">Enable Sidebar</span>
                    <div class="toggle-switch" data-control="sidebar">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-row">
                    <span class="toggle-label">Sidebar Position Right</span>
                    <div class="toggle-switch" data-control="sidebar-right">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-row">
                    <span class="toggle-label">Header Emphasis</span>
                    <div class="toggle-switch active" data-control="header-emphasis">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>

            <div class="control-section">
                <h5>Spacing & Display</h5>
                <div class="toggle-row">
                    <span class="toggle-label">Compact Spacing</span>
                    <div class="toggle-switch" data-control="compact">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div class="toggle-row">
                    <span class="toggle-label">Inverted Colors</span>
                    <div class="toggle-switch" data-control="inverted">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="center-panel">
            <div class="resume-preview-container">
                <div class="resume-preview" id="resumePreview">
                    <!-- Content will be dynamically generated -->
                </div>
            </div>
        </div>

        <div class="right-panel">
            <h3 class="panel-title">Template Settings</h3>
            
            <div class="form-group">
                <label class="form-label">Template Name</label>
                <input type="text" class="form-control-custom" id="templateName" value="modern-minimalist-v1" placeholder="template-name">
            </div>

            <div class="form-group">
                <label class="form-label">Display Name</label>
                <input type="text" class="form-control-custom" id="displayName" value="Modern Minimalist" placeholder="Display Name">
            </div>

            <div class="form-group">
                <label class="form-label">Style Category</label>
                <select class="select-custom" id="styleCategory">
                    <option selected>Modern</option>
                    <option>Executive</option>
                    <option>Creative</option>
                    <option>Technical</option>
                    <option>Academic</option>
                </select>
            </div>

            <div class="control-section">
                <h5>Typography</h5>
                <div class="slider-group">
                    <div class="slider-label">
                        <span>Font Size</span>
                        <span id="fontSizeValue">100%</span>
                    </div>
                    <input type="range" class="slider-input" id="fontSizeSlider" min="80" max="120" value="100">
                </div>
                <div class="form-group" style="margin-top: 12px;">
                    <label class="form-label">Font Family</label>
                    <select class="select-custom" id="fontFamily">
                        <option value="Inter">Inter (Default)</option>
                        <option value="Roboto">Roboto</option>
                        <option value="Open Sans">Open Sans</option>
                        <option value="Lato">Lato</option>
                        <option value="Montserrat">Montserrat</option>
                        <option value="Poppins">Poppins</option>
                        <option value="Georgia">Georgia (Serif)</option>
                        <option value="Times New Roman">Times New Roman</option>
                    </select>
                </div>
            </div>

            <div class="control-section">
                <h5>Primary Color</h5>
                <div class="color-input-group">
                    <input type="color" class="color-input-custom" id="primaryColorPicker" value="#17cede">
                    <input type="text" class="color-text-input" id="primaryColorText" value="#17cede" maxlength="7">
                </div>
                <div class="color-picker-group" style="margin-top: 12px;">
                    <div class="color-option active" data-color="#17cede" style="background: #17cede;"></div>
                    <div class="color-option" data-color="#4338CA" style="background: #4338CA;"></div>
                    <div class="color-option" data-color="#10b981" style="background: #10b981;"></div>
                    <div class="color-option" data-color="#f59e0b" style="background: #f59e0b;"></div>
                    <div class="color-option" data-color="#ef4444" style="background: #ef4444;"></div>
                    <div class="color-option" data-color="#8b5cf6" style="background: #8b5cf6;"></div>
                </div>
            </div>

            <div class="control-section">
                <h5>Secondary Color</h5>
                <div class="color-input-group">
                    <input type="color" class="color-input-custom" id="secondaryColorPicker" value="#4f46e5">
                    <input type="text" class="color-text-input" id="secondaryColorText" value="#4f46e5" maxlength="7">
                </div>
                <div class="color-picker-group" style="margin-top: 12px;">
                    <div class="color-option" data-color-secondary="#4f46e5" style="background: #4f46e5;"></div>
                    <div class="color-option" data-color-secondary="#6366f1" style="background: #6366f1;"></div>
                    <div class="color-option" data-color-secondary="#8b5cf6" style="background: #8b5cf6;"></div>
                    <div class="color-option" data-color-secondary="#ec4899" style="background: #ec4899;"></div>
                    <div class="color-option" data-color-secondary="#f97316" style="background: #f97316;"></div>
                    <div class="color-option" data-color-secondary="#06b6d4" style="background: #06b6d4;"></div>
                </div>
            </div>

            <div class="control-section">
                <h5>Layout Spacing</h5>
                <div class="preset-buttons">
                    <button class="preset-btn" data-spacing="compact">Compact</button>
                    <button class="preset-btn active" data-spacing="comfortable">Comfortable</button>
                    <button class="preset-btn" data-spacing="spacious">Spacious</button>
                    <button class="preset-btn" data-spacing="extra">Extra Large</button>
                </div>
                <div class="slider-group" style="margin-top: 16px;">
                    <div class="slider-label">
                        <span>Padding</span>
                        <span id="paddingValue">48px</span>
                    </div>
                    <input type="range" class="slider-input" id="paddingSlider" min="24" max="72" value="48">
                </div>
                <div class="slider-group">
                    <div class="slider-label">
                        <span>Section Spacing</span>
                        <span id="spacingValue">28px</span>
                    </div>
                    <input type="range" class="slider-input" id="spacingSlider" min="16" max="48" value="28">
                </div>
            </div>

            <div class="feature-section">
                <h5>Quick Actions</h5>
                <div class="export-buttons">
                    <button class="export-btn" id="duplicateBtn">
                        <span>Duplicate Template</span>
                        <svg class="icon-svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                        </svg>
                    </button>
                    <button class="export-btn" id="previewBtn">
                        <span>Preview Full Page</span>
                        <svg class="icon-svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                    </button>
                    <button class="export-btn" id="exportHtmlBtn">
                        <span>Export HTML</span>
                        <svg class="icon-svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="control-section">
                <div class="toggle-row">
                    <span class="toggle-label">Active Template</span>
                    <div class="toggle-switch active" data-control="active-template">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Subscription Tier</label>
                <select class="select-custom" id="subscriptionTier">
                    <option>Free</option>
                    <option selected>Premium</option>
                    <option>Enterprise</option>
                </select>
            </div>
        </div>
    </div>

    <script>
        // =============================================
        // STATE MANAGEMENT
        // =============================================
        const state = {
            layout: 'modern',
            sidebar: false,
            sidebarRight: false,
            compact: false,
            inverted: false,
            headerEmphasis: true,
            activeTemplate: true,
            fontSize: 100,
            fontFamily: 'Inter',
            primaryColor: '#17cede',
            secondaryColor: '#4f46e5',
            padding: 48,
            spacing: 28,
            spacingPreset: 'comfortable',
            templateName: 'modern-minimalist-v1',
            displayName: 'Modern Minimalist',
            styleCategory: 'Modern',
            subscriptionTier: 'Premium'
        };

        // =============================================
        // DEMO DATA (Professional Resume)
        // =============================================
        const demoData = {
            fullName: 'Alexandra Morgan',
            jobTitle: 'Senior Product Manager & Strategy Lead',
            email: 'alexandra.morgan@email.com',
            phone: '+1 (555) 123-4567',
            linkedin: 'linkedin.com/in/alexmorgan',
            location: 'San Francisco, CA',
            summary: 'Results-driven Product Manager with 8+ years of experience leading cross-functional teams to deliver innovative SaaS solutions. Proven track record of driving product strategy, increasing user engagement by 200%, and managing products from conception to launch. Expert in Agile methodologies, data-driven decision making, and stakeholder management.',
            experience: [
                {
                    role: 'Senior Product Manager',
                    company: 'TechVision Solutions',
                    date: '2021 - Present',
                    description: [
                        'Led product strategy for enterprise SaaS platform serving 50,000+ users, resulting in 45% increase in customer retention',
                        'Managed cross-functional team of 12 engineers, designers, and analysts to deliver 4 major product releases',
                        'Implemented data-driven product roadmap that increased user engagement by 200% and reduced churn by 30%',
                        'Collaborated with C-suite executives to align product vision with company strategic objectives'
                    ]
                },
                {
                    role: 'Product Manager',
                    company: 'InnovateLabs Inc.',
                    date: '2019 - 2021',
                    description: [
                        'Spearheaded development of mobile app that acquired 100,000 users within first 6 months',
                        'Conducted market research and competitive analysis to identify product opportunities',
                        'Established agile development processes that improved sprint velocity by 40%'
                    ]
                },
                {
                    role: 'Associate Product Manager',
                    company: 'StartupHub Technologies',
                    date: '2017 - 2019',
                    description: [
                        'Assisted in product discovery and user research for B2B collaboration platform',
                        'Created product requirements documents and user stories for development team',
                        'Analyzed product metrics and presented insights to stakeholders'
                    ]
                }
            ],
            skills: ['Product Strategy', 'Agile/Scrum', 'User Research', 'Data Analysis', 'Roadmap Planning', 'Stakeholder Mgmt', 'SQL & Analytics', 'A/B Testing', 'Figma/Design'],
            education: [
                {
                    degree: 'MBA, Technology Management',
                    institution: 'Stanford Graduate School of Business',
                    date: '2015 - 2017'
                },
                {
                    degree: 'BS, Computer Science',
                    institution: 'University of California, Berkeley',
                    date: '2011 - 2015'
                }
            ]
        };

        // =============================================
        // TEMPLATE ENGINE
        // =============================================
        function generateResumeHTML(data, layoutType) {
            const isSidebar = state.sidebar || layoutType === 'sidebar';
            
            if (isSidebar) {
                return generateSidebarLayout(data);
            } else if (layoutType === 'creative') {
                return generateCreativeLayout(data);
            } else if (layoutType === 'timeline') {
                return generateTimelineLayout(data);
            } else {
                return generateStandardLayout(data);
            }
        }

        function generateStandardLayout(data) {
            return `
                <div class="resume-header">
                    <h1 class="resume-name">{{fullName}}</h1>
                    <div class="resume-title">{{jobTitle}}</div>
                    <div class="resume-contact">
                        <span>üìß {{email}}</span>
                        <span>üì± {{phone}}</span>
                        <span>üîó {{linkedin}}</span>
                        <span>üìç {{location}}</span>
                    </div>
                </div>

                <div class="resume-section">
                    <h3 class="section-title">Professional Summary</h3>
                    <p>{{summary}}</p>
                </div>

                <div class="resume-section">
                    <h3 class="section-title">Professional Experience</h3>
                    {{#experience}}
                </div>

                <div class="resume-section">
                    <h3 class="section-title">Core Skills</h3>
                    <div class="skills-grid">
                        {{#skills}}
                    </div>
                </div>

                <div class="resume-section">
                    <h3 class="section-title">Education</h3>
                    {{#education}}
                </div>
            `;
        }

        function generateSidebarLayout(data) {
            return `
                <div class="resume-layout-sidebar ${state.sidebarRight ? 'sidebar-right' : ''}">
                    <div class="sidebar-content">
                        <div class="resume-section">
                            <h3 class="section-title">Contact</h3>
                            <div style="font-size: 12px; line-height: 1.8; color: rgba(255,255,255,0.9);">
                                <div style="margin-bottom: 8px;">üìß {{email}}</div>
                                <div style="margin-bottom: 8px;">üì± {{phone}}</div>
                                <div style="margin-bottom: 8px;">üîó {{linkedin}}</div>
                                <div>üìç {{location}}</div>
                            </div>
                        </div>
                        <div class="resume-section">
                            <h3 class="section-title">Skills</h3>
                            <div style="display: flex; flex-direction: column; gap: 8px;">
                                ${data.skills.map(skill => `
                                    <div style="background: rgba(255,255,255,0.1); padding: 10px 14px; border-radius: 6px; font-size: 12px; font-weight: 600;">${skill}</div>
                                `).join('')}
                            </div>
                        </div>
                        <div class="resume-section">
                            <h3 class="section-title">Education</h3>
                            ${data.education.map(edu => `
                                <div style="margin-bottom: 20px;">
                                    <div style="font-size: 13px; font-weight: 700; margin-bottom: 4px;">${edu.degree}</div>
                                    <div style="font-size: 11px; color: rgba(255,255,255,0.7); margin-bottom: 2px;">${edu.institution}</div>
                                    <div style="font-size: 10px; color: rgba(255,255,255,0.6);">${edu.date}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="main-content-wrapper">
                        <div class="resume-header" style="border-bottom: none; margin-bottom: ${state.spacing}px;">
                            <h1 class="resume-name">{{fullName}}</h1>
                            <div class="resume-title">{{jobTitle}}</div>
                        </div>

                        <div class="resume-section" style="margin-bottom: ${state.spacing}px;">
                            <h3 class="section-title">Professional Summary</h3>
                            <p>{{summary}}</p>
                        </div>

                        <div class="resume-section" style="margin-bottom: ${state.spacing}px;">
                            <h3 class="section-title">Professional Experience</h3>
                            ${data.experience.map(exp => `
                                <div class="experience-item">
                                    <div class="experience-header">
                                        <div>
                                            <div class="experience-role">${exp.role}</div>
                                            <div class="experience-company">${exp.company}</div>
                                        </div>
                                        <div class="experience-date">${exp.date}</div>
                                    </div>
                                    <ul class="experience-description">
                                        ${exp.description.map(desc => `<li>${desc}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function generateCreativeLayout(data) {
            return `
                <div class="resume-header" style="grid-column: 1 / -1; text-align: center;">
                    <h1 class="resume-name">{{fullName}}</h1>
                    <div class="resume-title">{{jobTitle}}</div>
                    <div class="resume-contact" style="justify-content: center;">
                        <span>üìß {{email}}</span>
                        <span>üì± {{phone}}</span>
                        <span>üîó {{linkedin}}</span>
                        <span>üìç {{location}}</span>
                    </div>
                </div>

                <div class="resume-content-grid">
                    <div>
                        <div class="resume-section">
                            <h3 class="section-title">Professional Summary</h3>
                            <p>{{summary}}</p>
                        </div>

                        <div class="resume-section">
                            <h3 class="section-title">Core Skills</h3>
                            <div class="skills-grid" style="grid-template-columns: 1fr;">
                                ${data.skills.map(skill => `<div class="skill-tag">${skill}</div>`).join('')}
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="resume-section">
                            <h3 class="section-title">Experience</h3>
                            ${data.experience.map(exp => `
                                <div class="experience-item">
                                    <div class="experience-role">${exp.role}</div>
                                    <div class="experience-company">${exp.company}</div>
                                    <div class="experience-date">${exp.date}</div>
                                </div>
                            `).join('')}
                        </div>

                        <div class="resume-section">
                            <h3 class="section-title">Education</h3>
                            ${data.education.map(edu => `
                                <div class="experience-item">
                                    <div class="experience-role">${edu.degree}</div>
                                    <div class="experience-company">${edu.institution}</div>
                                    <div class="experience-date">${edu.date}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        function generateTimelineLayout(data) {
            return `
                <div class="resume-header">
                    <h1 class="resume-name">{{fullName}}</h1>
                    <div class="resume-title">{{jobTitle}}</div>
                    <div class="resume-contact">
                        <span>üìß {{email}}</span>
                        <span>üì± {{phone}}</span>
                        <span>üîó {{linkedin}}</span>
                        <span>üìç {{location}}</span>
                    </div>
                </div>

                <div class="resume-section">
                    <h3 class="section-title">Professional Summary</h3>
                    <p>{{summary}}</p>
                </div>

                <div class="resume-section">
                    <h3 class="section-title">Professional Experience</h3>
                    ${data.experience.map(exp => `
                        <div class="experience-item">
                            <div class="experience-header">
                                <div>
                                    <div class="experience-role">${exp.role}</div>
                                    <div class="experience-company">${exp.company}</div>
                                </div>
                                <div class="experience-date">${exp.date}</div>
                            </div>
                            <ul class="experience-description">
                                ${exp.description.map(desc => `<li>${desc}</li>`).join('')}
                            </ul>
                        </div>
                    `).join('')}
                </div>

                <div class="resume-section">
                    <h3 class="section-title">Core Skills</h3>
                    <div class="skills-grid">
                        ${data.skills.map(skill => `<div class="skill-tag">${skill}</div>`).join('')}
                    </div>
                </div>

                <div class="resume-section">
                    <h3 class="section-title">Education</h3>
                    ${data.education.map(edu => `
                        <div class="experience-item">
                            <div class="experience-header">
                                <div>
                                    <div class="experience-role">${edu.degree}</div>
                                    <div class="experience-company">${edu.institution}</div>
                                </div>
                                <div class="experience-date">${edu.date}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderTemplate(template, data) {
            let html = template;
            
            // Replace simple variables
            html = html.replace(/\{\{fullName\}\}/g, data.fullName);
            html = html.replace(/\{\{jobTitle\}\}/g, data.jobTitle);
            html = html.replace(/\{\{email\}\}/g, data.email);
            html = html.replace(/\{\{phone\}\}/g, data.phone);
            html = html.replace(/\{\{linkedin\}\}/g, data.linkedin);
            html = html.replace(/\{\{location\}\}/g, data.location);
            html = html.replace(/\{\{summary\}\}/g, data.summary);
            
            // Replace experience section
            const experienceHTML = data.experience.map(exp => `
                <div class="experience-item">
                    <div class="experience-header">
                        <div>
                            <div class="experience-role">${exp.role}</div>
                            <div class="experience-company">${exp.company}</div>
                        </div>
                        <div class="experience-date">${exp.date}</div>
                    </div>
                    <ul class="experience-description">
                        ${exp.description.map(desc => `<li>${desc}</li>`).join('')}
                    </ul>
                </div>
            `).join('');
            html = html.replace(/\{\{#experience\}\}/g, experienceHTML);
            
            // Replace skills section
            const skillsHTML = data.skills.map(skill => 
                `<div class="skill-tag">${skill}</div>`
            ).join('');
            html = html.replace(/\{\{#skills\}\}/g, skillsHTML);
            
            // Replace education section
            const educationHTML = data.education.map(edu => `
                <div class="experience-item">
                    <div class="experience-header">
                        <div>
                            <div class="experience-role">${edu.degree}</div>
                            <div class="experience-company">${edu.institution}</div>
                        </div>
                        <div class="experience-date">${edu.date}</div>
                    </div>
                </div>
            `).join('');
            html = html.replace(/\{\{#education\}\}/g, educationHTML);
            
            return html;
        }

        // =============================================
        // UPDATE PREVIEW FUNCTION
        // =============================================
        function updatePreview() {
            const preview = document.getElementById('resumePreview');
            
            // Add transition effect
            preview.classList.add('transitioning');
            
            setTimeout(() => {
                // Reset classes
                preview.className = 'resume-preview';
                
                // Apply layout classes
                if (state.layout) {
                    preview.classList.add(`layout-${state.layout}`);
                }
                
                // Apply state-based classes
                if (state.compact) preview.classList.add('compact-spacing');
                if (state.inverted) preview.classList.add('inverted');
                
                // Apply styles
                preview.style.padding = state.padding + 'px';
                preview.style.fontSize = (state.fontSize / 100) + 'em';
                preview.style.fontFamily = state.fontFamily;
                
                // Update CSS variables
                document.documentElement.style.setProperty('--primary', state.primaryColor);
                document.documentElement.style.setProperty('--secondary-color', state.secondaryColor);
                
                // Generate and render HTML
                const template = generateResumeHTML(demoData, state.layout);
                const html = renderTemplate(template, demoData);
                preview.innerHTML = html;
                
                // Apply section spacing
                const sections = preview.querySelectorAll('.resume-section');
                sections.forEach(section => {
                    section.style.marginBottom = state.spacing + 'px';
                });
                
                // Remove transition effect
                preview.classList.remove('transitioning');
            }, 150);
        }

        // =============================================
        // NOTIFICATION SYSTEM
        // =============================================
        function showNotification(title, message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icon = type === 'success' 
                ? '<svg class="notification-icon" fill="none" stroke="#10b981" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'
                : '<svg class="notification-icon" fill="none" stroke="#ef4444" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>';
            
            notification.innerHTML = `
                ${icon}
                <div class="notification-content">
                    <div class="notification-title">${title}</div>
                    <div class="notification-message">${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('hiding');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // =============================================
        // EVENT LISTENERS
        // =============================================
        
        // Close button
        document.getElementById('closeBtn').addEventListener('click', () => {
            if (confirm('Are you sure you want to close? Unsaved changes will be lost.')) {
                window.history.back();
            }
        });

        // New Template button
        document.getElementById('newTemplateBtn').addEventListener('click', function() {
            const btn = this;
            btn.classList.add('loading');
            btn.innerHTML = '<span class="spinner"></span>Creating...';
            
            setTimeout(() => {
                // Reset to default state
                state.layout = 'modern';
                state.sidebar = false;
                state.sidebarRight = false;
                state.compact = false;
                state.inverted = false;
                state.fontSize = 100;
                state.primaryColor = '#17cede';
                state.padding = 48;
                state.spacing = 28;
                
                // Reset UI
                document.querySelectorAll('.layout-card').forEach(card => {
                    card.classList.remove('active');
                    if (card.dataset.layout === 'modern') {
                        card.classList.add('active');
                    }
                });
                
                document.querySelectorAll('.toggle-switch').forEach(toggle => {
                    toggle.classList.remove('active');
                    if (toggle.dataset.control === 'header-emphasis' || toggle.dataset.control === 'active-template') {
                        toggle.classList.add('active');
                    }
                });
                
                document.getElementById('fontSizeSlider').value = 100;
                document.getElementById('fontSizeValue').textContent = '100%';
                document.getElementById('paddingSlider').value = 48;
                document.getElementById('paddingValue').textContent = '48px';
                document.getElementById('spacingSlider').value = 28;
                document.getElementById('spacingValue').textContent = '28px';
                
                updatePreview();
                
                btn.classList.remove('loading');
                btn.innerHTML = 'New Professional Template';
                showNotification('Template Created', 'New template initialized successfully');
            }, 1000);
        });

        // Publish button
        document.getElementById('publishBtn').addEventListener('click', function() {
            const btn = this;
            btn.classList.add('loading');
            btn.innerHTML = '<span class="spinner"></span>Publishing...';
            
            setTimeout(() => {
                const templateObject = {
                    templateName: document.getElementById('templateName').value,
                    displayName: document.getElementById('displayName').value,
                    styleCategory: document.getElementById('styleCategory').value,
                    subscriptionTier: document.getElementById('subscriptionTier').value,
                    layoutType: state.layout,
                    settings: {
                        sidebar: state.sidebar,
                        sidebarRight: state.sidebarRight,
                        compact: state.compact,
                        inverted: state.inverted,
                        headerEmphasis: state.headerEmphasis,
                        fontSize: state.fontSize,
                        primaryColor: state.primaryColor,
                        padding: state.padding,
                        spacing: state.spacing
                    },
                    htmlTemplate: generateResumeHTML(demoData, state.layout),
                    cssTemplate: 'Extracted CSS would go here',
                    active: state.activeTemplate
                };
                
                console.log('PUBLISHED TEMPLATE:', JSON.stringify(templateObject, null, 2));
                
                btn.classList.remove('loading');
                btn.innerHTML = 'Publish Changes';
                showNotification('Published Successfully', 'Template has been saved and is ready for use');
            }, 1500);
        });

        // Layout cards
        document.querySelectorAll('.layout-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.layout-card').forEach(c => c.classList.remove('active'));
                card.classList.add('active');
                state.layout = card.dataset.layout;
                updatePreview();
            });
        });

        // Toggle switches
        document.querySelectorAll('.toggle-switch').forEach(toggle => {
            toggle.addEventListener('click', () => {
                toggle.classList.toggle('active');
                const control = toggle.dataset.control;
                
                switch(control) {
                    case 'sidebar':
                        state.sidebar = toggle.classList.contains('active');
                        break;
                    case 'sidebar-right':
                        state.sidebarRight = toggle.classList.contains('active');
                        break;
                    case 'compact':
                        state.compact = toggle.classList.contains('active');
                        break;
                    case 'inverted':
                        state.inverted = toggle.classList.contains('active');
                        break;
                    case 'header-emphasis':
                        state.headerEmphasis = toggle.classList.contains('active');
                        break;
                    case 'active-template':
                        state.activeTemplate = toggle.classList.contains('active');
                        return; // Don't update preview for this
                }
                
                updatePreview();
            });
        });

        // Font size slider
        document.getElementById('fontSizeSlider').addEventListener('input', (e) => {
            state.fontSize = e.target.value;
            document.getElementById('fontSizeValue').textContent = e.target.value + '%';
            updatePreview();
        });

        // Padding slider
        document.getElementById('paddingSlider').addEventListener('input', (e) => {
            state.padding = e.target.value;
            document.getElementById('paddingValue').textContent = e.target.value + 'px';
            updatePreview();
        });

        // Spacing slider
        document.getElementById('spacingSlider').addEventListener('input', (e) => {
            state.spacing = e.target.value;
            document.getElementById('spacingValue').textContent = e.target.value + 'px';
            updatePreview();
        });

        // Color picker
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', () => {
                if (option.dataset.color) {
                    document.querySelectorAll('.color-option[data-color]').forEach(o => o.classList.remove('active'));
                    option.classList.add('active');
                    state.primaryColor = option.dataset.color;
                    document.getElementById('primaryColorPicker').value = option.dataset.color;
                    document.getElementById('primaryColorText').value = option.dataset.color;
                    updatePreview();
                } else if (option.dataset.colorSecondary) {
                    document.querySelectorAll('.color-option[data-color-secondary]').forEach(o => o.classList.remove('active'));
                    option.classList.add('active');
                    state.secondaryColor = option.dataset.colorSecondary;
                    document.getElementById('secondaryColorPicker').value = option.dataset.colorSecondary;
                    document.getElementById('secondaryColorText').value = option.dataset.colorSecondary;
                    updatePreview();
                }
            });
        });

        // Primary color picker input
        document.getElementById('primaryColorPicker').addEventListener('input', (e) => {
            state.primaryColor = e.target.value;
            document.getElementById('primaryColorText').value = e.target.value;
            updatePreview();
        });

        document.getElementById('primaryColorText').addEventListener('input', (e) => {
            let value = e.target.value;
            if (!value.startsWith('#')) value = '#' + value;
            if (/^#[0-9A-F]{6}$/i.test(value)) {
                state.primaryColor = value;
                document.getElementById('primaryColorPicker').value = value;
                updatePreview();
            }
        });

        // Secondary color picker input
        document.getElementById('secondaryColorPicker').addEventListener('input', (e) => {
            state.secondaryColor = e.target.value;
            document.getElementById('secondaryColorText').value = e.target.value;
            updatePreview();
        });

        document.getElementById('secondaryColorText').addEventListener('input', (e) => {
            let value = e.target.value;
            if (!value.startsWith('#')) value = '#' + value;
            if (/^#[0-9A-F]{6}$/i.test(value)) {
                state.secondaryColor = value;
                document.getElementById('secondaryColorPicker').value = value;
                updatePreview();
            }
        });

        // Font family selector
        document.getElementById('fontFamily').addEventListener('change', (e) => {
            state.fontFamily = e.target.value;
            updatePreview();
        });

        // Spacing presets
        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const preset = btn.dataset.spacing;
                state.spacingPreset = preset;
                
                switch(preset) {
                    case 'compact':
                        state.padding = 32;
                        state.spacing = 18;
                        break;
                    case 'comfortable':
                        state.padding = 48;
                        state.spacing = 28;
                        break;
                    case 'spacious':
                        state.padding = 56;
                        state.spacing = 36;
                        break;
                    case 'extra':
                        state.padding = 72;
                        state.spacing = 48;
                        break;
                }
                
                document.getElementById('paddingSlider').value = state.padding;
                document.getElementById('paddingValue').textContent = state.padding + 'px';
                document.getElementById('spacingSlider').value = state.spacing;
                document.getElementById('spacingValue').textContent = state.spacing + 'px';
                
                updatePreview();
            });
        });

        // Duplicate template button
        document.getElementById('duplicateBtn').addEventListener('click', () => {
            const timestamp = new Date().getTime();
            state.templateName = state.templateName + '-copy-' + timestamp;
            state.displayName = state.displayName + ' (Copy)';
            document.getElementById('templateName').value = state.templateName;
            document.getElementById('displayName').value = state.displayName;
            showNotification('Template Duplicated', 'Template has been duplicated successfully');
        });

        // Preview full page button
        document.getElementById('previewBtn').addEventListener('click', () => {
            const preview = document.getElementById('resumePreview');
            if (preview.requestFullscreen) {
                preview.requestFullscreen();
            } else if (preview.webkitRequestFullscreen) {
                preview.webkitRequestFullscreen();
            } else if (preview.msRequestFullscreen) {
                preview.msRequestFullscreen();
            }
            showNotification('Preview Mode', 'Press ESC to exit fullscreen');
        });

        // Export HTML button
        document.getElementById('exportHtmlBtn').addEventListener('click', () => {
            const template = generateResumeHTML(demoData, state.layout);
            const html = renderTemplate(template, demoData);
            
            const fullHtml = `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${state.displayName}</title>
    <style>
        body { 
            font-family: ${state.fontFamily}, sans-serif; 
            font-size: ${state.fontSize}%;
            padding: ${state.padding}px;
            --primary: ${state.primaryColor};
            --secondary-color: ${state.secondaryColor};
        }
    </style>
</head>
<body>
    ${html}
</body>
</html>`;
            
            const blob = new Blob([fullHtml], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = state.templateName + '.html';
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('Export Complete', 'HTML template has been downloaded');
        });

        // Form inputs
        document.getElementById('templateName').addEventListener('input', (e) => {
            state.templateName = e.target.value;
        });

        document.getElementById('displayName').addEventListener('input', (e) => {
            state.displayName = e.target.value;
        });

        document.getElementById('styleCategory').addEventListener('change', (e) => {
            state.styleCategory = e.target.value;
        });

        document.getElementById('subscriptionTier').addEventListener('change', (e) => {
            state.subscriptionTier = e.target.value;
        });

        // =============================================
        // INITIALIZE
        // =============================================
        updatePreview();
    </script>
</body>
</html>
