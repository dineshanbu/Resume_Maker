<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing - ResumePro</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm" data-testid="main-navbar">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html" data-testid="navbar-brand">
                <i class="bi bi-file-earmark-text text-primary"></i>
                <span class="text-primary">Resume</span><span class="text-dark">Pro</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-lg-center">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="templates.html">Templates</a>
                    </li>
                    <li class="nav-item ms-lg-2">
                        <a class="btn btn-primary" href="resume-builder.html" data-testid="create-resume-btn">Create Resume</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Pricing Section -->
    <section class="py-6" data-testid="pricing-section">
        <div class="container">
            <div class="text-center mb-4">
                <h1 class="display-5 fw-bold mb-2">Simple, Transparent Pricing</h1>
                <p class="lead text-muted mb-3">Choose the plan that's right for you</p>
                
                <!-- Billing Toggle -->
                <div class="d-flex justify-content-center align-items-center gap-3 mt-3">
                    <span class="fw-semibold" id="monthlyLabel" style="font-size: 0.95rem;">Monthly</span>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="billingToggle" onchange="toggleBilling()" data-testid="billing-toggle">
                    </div>
                    <span class="fw-semibold" id="yearlyLabel" style="font-size: 0.95rem;">Yearly</span>
                    <span class="badge bg-success" style="font-size: 0.75rem;">Save 20%</span>
                </div>
            </div>

            <div class="row g-3 justify-content-center">
                <!-- Free Plan -->
                <div class="col-lg-4 col-md-6">
                    <div class="pricing-card h-100" data-testid="pricing-card-free">
                        <div class="pricing-header">
                            <h4 class="mb-2">Free</h4>
                            <div class="price mb-2">
                                <span class="h2 fw-bold">₹0</span>
                                <span class="text-muted">/month</span>
                            </div>
                            <p class="text-muted" style="font-size: 0.9rem;">Perfect for getting started</p>
                        </div>
                        <div class="pricing-features flex-fill">
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>1 Resume</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>Basic templates</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>5 job suggestions</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>PDF export</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>Basic support</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-x-circle text-muted me-2"></i>
                                <span class="text-muted">Premium templates</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-x-circle text-muted me-2"></i>
                                <span class="text-muted">Unlimited job matches</span>
                            </div>
                        </div>
                        <button class="btn btn-outline-primary w-100 mt-3" onclick="selectPlan('free')" data-testid="select-free-plan">Get Started</button>
                    </div>
                </div>

                <!-- Premium Plan -->
                <div class="col-lg-4 col-md-6">
                    <div class="pricing-card pricing-card-featured h-100" data-testid="pricing-card-premium">
                        <div class="featured-badge">Most Popular</div>
                        <div class="pricing-header">
                            <h4 class="mb-2">Premium</h4>
                            <div class="price mb-2">
                                <span class="h2 fw-bold" id="premiumPrice">₹150</span>
                                <span class="text-muted" id="premiumPeriod">/month</span>
                            </div>
                            <p class="text-muted" style="font-size: 0.9rem;">Everything you need to succeed</p>
                        </div>
                        <div class="pricing-features flex-fill">
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span><strong>Unlimited resumes</strong></span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span><strong>All premium templates</strong></span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>Unlimited job matches</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>Priority support</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>Resume analytics</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>Job alerts</span>
                            </div>
                            <div class="feature-item mb-2">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                <span>No watermark</span>
                            </div>
                        </div>
                        <button class="btn btn-primary w-100 mt-3" onclick="selectPlan('premium')" data-testid="select-premium-plan">Upgrade to Premium</button>
                    </div>
                </div>
            </div>

            <!-- Ratings Section -->
            <div class="text-center mt-4">
                <div class="d-flex justify-content-center align-items-center gap-2 mb-2">
                    <i class="bi bi-star-fill text-warning fs-5"></i>
                    <i class="bi bi-star-fill text-warning fs-5"></i>
                    <i class="bi bi-star-fill text-warning fs-5"></i>
                    <i class="bi bi-star-fill text-warning fs-5"></i>
                    <i class="bi bi-star-fill text-warning fs-5"></i>
                </div>
                <p class="text-muted mb-0" style="font-size: 0.95rem;">4.9/5 from over 2,500 reviews</p>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="py-6 bg-light" data-testid="faq-section">
        <div class="container">
            <div class="text-center mb-4">
                <h2 class="display-5 fw-bold mb-2">Frequently Asked Questions</h2>
            </div>

            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="accordion" id="pricingFAQ">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1" data-testid="faq-question-1">
                                    Can I cancel my subscription anytime?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#pricingFAQ">
                                <div class="accordion-body">
                                    Yes! You can cancel your premium subscription at any time. You'll continue to have access until the end of your billing period.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2" data-testid="faq-question-2">
                                    What happens to my resumes if I downgrade?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#pricingFAQ">
                                <div class="accordion-body">
                                    All your resumes remain safe and accessible. However, you won't be able to create new resumes beyond the free plan limit.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3" data-testid="faq-question-3">
                                    Do you offer refunds?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#pricingFAQ">
                                <div class="accordion-body">
                                    Yes, we offer a 14-day money-back guarantee. If you're not satisfied, contact us for a full refund.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4" data-testid="faq-question-4">
                                    Can I switch between monthly and yearly billing?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#pricingFAQ">
                                <div class="accordion-body">
                                    Yes! You can switch your billing cycle at any time. When switching to yearly, you'll save 20%.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/auth.js"></script>
    <script>
        let isYearly = false;

        function toggleBilling() {
            isYearly = document.getElementById('billingToggle').checked;
            
            const monthlyLabel = document.getElementById('monthlyLabel');
            const yearlyLabel = document.getElementById('yearlyLabel');
            const premiumPrice = document.getElementById('premiumPrice');
            const premiumPeriod = document.getElementById('premiumPeriod');
            
            if (isYearly) {
                monthlyLabel.classList.remove('fw-semibold');
                yearlyLabel.classList.add('fw-semibold');
                premiumPrice.textContent = '₹1440';
                premiumPeriod.textContent = '/year';
            } else {
                monthlyLabel.classList.add('fw-semibold');
                yearlyLabel.classList.remove('fw-semibold');
                premiumPrice.textContent = '₹150';
                premiumPeriod.textContent = '/month';
            }
        }

        function selectPlan(plan) {
            const user = getCurrentUser();
            
            if (!user) {
                window.location.href = 'login.html';
                return;
            }
            
            if (plan === 'free') {
                alert('You are already on the free plan!');
                return;
            }
            
            if (plan === 'premium') {
                if (user.plan === 'premium') {
                    alert('You are already on the Premium plan!');
                    return;
                }
                
                const billing = isYearly ? 'yearly' : 'monthly';
                const amount = isYearly ? '₹1440/year' : '₹150/month';
                
                if (confirm(`Upgrade to Premium (${amount})?\n\nThis is a mock upgrade - in a real system, this would redirect to a payment gateway.`)) {
                    // Upgrade user
                    user.plan = 'premium';
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    
                    // Update in users list
                    const users = JSON.parse(localStorage.getItem('users') || '[]');
                    const userIndex = users.findIndex(u => u.email === user.email);
                    if (userIndex >= 0) {
                        users[userIndex].plan = 'premium';
                        localStorage.setItem('users', JSON.stringify(users));
                    }
                    
                    alert('Successfully upgraded to Premium! ✨');
                    window.location.href = 'dashboard.html';
                }
            }
        }
    </script>
</body>
</html>